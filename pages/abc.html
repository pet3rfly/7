<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘çš„ABC - è‹±è¯­å¯è’™</title>
    <style>
        /* ... (ä¿ç•™ä¹‹å‰çš„ root å’Œ body æ ·å¼) ... */
        :root {
            --card-bg: #FFFFFF;
            --card-shadow: 0 10px 25px rgba(0,0,0,0.15);
            --primary-color: #4DB6AC; 
            --accent-color: #FF7043;
            --text-color: #37474F;
        }
        body.mode-plant { --primary-color: #8BC34A; --accent-color: #E91E63; }
        
        body {
            margin: 0; padding: 0;
            background-image: url('../images/szzmcbg.jpg');
            background-position: center center; background-repeat: no-repeat; background-attachment: fixed; background-size: cover;
            font-family: "Comic Sans MS", "YouYuan", "å¹¼åœ†", sans-serif;
            min-height: 100vh; display: flex; flex-direction: column;
            user-select: none; padding-bottom: 200px; box-sizing: border-box;
            transition: all 0.5s ease;
        }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.6); pointer-events: none; z-index: -1; }

        /* --- ç»Ÿä¸€çš„ä¸»é¡µæŒ‰é’®æ ·å¼ --- */
        .home-btn {
            position: fixed; top: 15px; right: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 6px 12px; border-radius: 30px;
            text-decoration: none; color: var(--primary-color);
            font-weight: bold; border: 2px solid #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15); z-index: 200;
            font-size: 0.9rem;
        }

        header { text-align: center; padding: 15px 10px; flex-shrink: 0; }
        h1 { margin: 0; color: #fff; text-shadow: 2px 2px 0px rgba(0,0,0,0.2); font-size: 2.2rem; background-color: var(--primary-color); display: inline-block; padding: 8px 30px; border-radius: 60px; border: 4px solid #fff; box-shadow: 0 5px 0px rgba(0,0,0,0.2); transition: background-color 0.3s; }

        #game-board {
            flex: 1; display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); /* è°ƒå°æœ€å°å®½åº¦ */
            gap: 15px; padding: 15px; max-width: 1000px; margin: 0 auto;
            align-content: start;
        }

        .card {
            width: auto; aspect-ratio: 3/4; /* ç¨å¾®çŸ®èƒ–ä¸€ç‚¹ï¼Œé˜²æ­¢å¤ªé•¿ */
            background-color: var(--card-bg); border-radius: 20px;
            box-shadow: var(--card-shadow); display: flex; flex-direction: column;
            align-items: center; overflow: hidden; border: 4px solid #fff;
            position: relative; animation: popIn 0.5s backwards;
            transition: all 0.2s ease; cursor: pointer;
            /* å…³é”®ï¼šå–æ¶ˆç§»åŠ¨ç«¯ç‚¹å‡»çš„é«˜äº®èƒŒæ™¯è‰² */
            -webkit-tap-highlight-color: transparent; 
        }
        
        .card:active { transform: scale(0.96); }

        .card-img-box {
            width: 100%; flex: 3; background-color: #E0F2F1;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; padding: 10px; box-sizing: border-box;
        }
        body.mode-plant .card-img-box { background-color: #F1F8E9; }
        .card-img-box img { width: 100%; height: 100%; object-fit: contain; }

        .card-text-area {
            width: 100%; flex: 2; display: flex; flex-direction: column;
            justify-content: center; align-items: center; background-color: #fff;
            border-top: 3px dashed var(--primary-color); padding: 5px 0;
        }

        .big-letter { font-size: 2.5rem; line-height: 1; font-weight: 900; color: var(--primary-color); font-family: "Comic Sans MS", sans-serif; }
        .word-row { display: flex; align-items: center; gap: 5px; margin-top: 2px; flex-wrap: wrap; justify-content: center; }
        .word { font-size: 1rem; font-weight: bold; color: var(--text-color); }
        .zh-word { font-size: 0.9rem; color: #999; }
        
        /* å–‡å­å›¾æ ‡ä½œä¸ºè£…é¥° */
        .speak-icon { font-size: 1rem; color: var(--accent-color); opacity: 0.7; }

        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* --- ç˜¦èº«ç‰ˆæ§åˆ¶é¢æ¿ --- */
        #controls {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 450px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            padding: 12px 15px; border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid var(--primary-color);
            display: flex; flex-direction: column; gap: 10px; z-index: 100;
        }

        .control-row { display: flex; align-items: center; justify-content: center; gap: 8px; }
        .label { font-weight: 900; color: var(--primary-color); font-size: 1rem; }

        .count-selector { display: flex; background: #ECEFF1; border-radius: 20px; padding: 3px; }
        .count-selector label { padding: 6px 15px; border-radius: 16px; cursor: pointer; font-weight: bold; color: #90A4AE; font-size: 0.9rem; }
        .count-selector input { display: none; }
        .count-selector input:checked + span { background: #fff; color: var(--primary-color); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .count-selector span { display: block; padding: 2px 8px; border-radius: 12px; }

        .mode-switch { display: flex; background: #ECEFF1; border-radius: 20px; padding: 3px; position: relative; cursor: pointer; }
        .mode-option { padding: 6px 15px; font-size: 0.9rem; font-weight: bold; color: #90A4AE; z-index: 2; transition: color 0.3s; }
        .mode-switch.animal-active .opt-animal { color: #fff; }
        .mode-switch.plant-active .opt-plant { color: #fff; }
        .mode-bg { position: absolute; top: 0; left: 0; width: 50%; height: 100%; background: var(--primary-color); border-radius: 20px; transition: transform 0.3s; z-index: 1; }
        .mode-switch.plant-active .mode-bg { transform: translateX(100%); }

        .refresh-btn {
            background-color: var(--primary-color); color: white; border: none; border-radius: 40px; width: 100%; padding: 10px; font-size: 1.2rem; font-weight: 900; cursor: pointer; box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }
        .refresh-btn:active { transform: translateY(4px); box-shadow: none; }

        /* æçª„å±å¹•é€‚é… */
        @media (max-width: 360px) {
            #game-board { grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; }
            .card { border-width: 3px; }
            .big-letter { font-size: 2rem; }
        }
    </style>
</head>
<body class="mode-animal">
    <div class="overlay"></div>
    <a href="../index.html" class="home-btn">ğŸ  ä¸»é¡µ</a>
    <header><h1 id="page-title">ğŸ¦ æˆ‘çš„ABC</h1></header>
    <div id="game-board"></div>
    <div id="controls">
        <div class="control-row">
            <div class="mode-switch animal-active" id="mode-switch" onclick="toggleMode()">
                <div class="mode-bg"></div><div class="mode-option opt-animal">ğŸ¦ åŠ¨ç‰©</div><div class="mode-option opt-plant">ğŸ è”¬æœ</div>
            </div>
        </div>
        <div class="control-row">
            <div class="label">çœ‹å‡ ä¸ªï¼š</div>
            <div class="count-selector">
                <label><input type="radio" name="count" value="3" checked onchange="initGame()"><span>3ä¸ª</span></label>
                <label><input type="radio" name="count" value="4" onchange="initGame()"><span>4ä¸ª</span></label>
                <label><input type="radio" name="count" value="5" onchange="initGame()"><span>5ä¸ª</span></label>
            </div>
        </div>
        <button class="refresh-btn" onclick="initGame()"><span>ğŸ² æ¢ä¸€æ‰¹ Next!</span></button>
    </div>

    <script>
        // æ•°æ®æºä¿æŒä¸å˜
        const animalData = [{L:'A',en:'Alligator',zh:'çŸ­å»é³„'},{L:'B',en:'Bear',zh:'ç†Š'},{L:'C',en:'Cat',zh:'çŒ«'},{L:'D',en:'Dog',zh:'ç‹—'},{L:'E',en:'Elephant',zh:'å¤§è±¡'},{L:'F',en:'Fox',zh:'ç‹ç‹¸'},{L:'G',en:'Giraffe',zh:'é•¿é¢ˆé¹¿'},{L:'H',en:'Hippo',zh:'æ²³é©¬'},{L:'I',en:'Iguana',zh:'é¬£èœ¥'},{L:'J',en:'Jellyfish',zh:'æ°´æ¯'},{L:'K',en:'Kangaroo',zh:'è¢‹é¼ '},{L:'L',en:'Lion',zh:'ç‹®å­'},{L:'M',en:'Monkey',zh:'çŒ´å­'},{L:'N',en:'Narwhal',zh:'ç‹¬è§’é²¸'},{L:'O',en:'Owl',zh:'çŒ«å¤´é¹°'},{L:'P',en:'Panda',zh:'ç†ŠçŒ«'},{L:'Q',en:'Quail',zh:'é¹Œé¹‘'},{L:'R',en:'Rabbit',zh:'å…”å­'},{L:'S',en:'Sheep',zh:'ç»µç¾Š'},{L:'T',en:'Tiger',zh:'è€è™'},{L:'U',en:'Unicorn',zh:'ç‹¬è§’å…½'},{L:'V',en:'Vulture',zh:'ç§ƒé¹«'},{L:'W',en:'Whale',zh:'é²¸é±¼'},{L:'X',en:'X-ray Fish',zh:'Xå…‰é±¼'},{L:'Y',en:'Yak',zh:'ç‰¦ç‰›'},{L:'Z',en:'Zebra',zh:'æ–‘é©¬'}];
        const plantData = [{L:'A',en:'Apple',zh:'è‹¹æœ'},{L:'B',en:'Banana',zh:'é¦™è•‰'},{L:'C',en:'Carrot',zh:'èƒ¡èåœ'},{L:'D',en:'Durian',zh:'æ¦´è²'},{L:'E',en:'Eggplant',zh:'èŒ„å­'},{L:'F',en:'Fig',zh:'æ— èŠ±æœ'},{L:'G',en:'Grape',zh:'è‘¡è„'},{L:'H',en:'Honeydew',zh:'å“ˆå¯†ç“œ'},{L:'I',en:'Iceberg Lettuce',zh:'ç”Ÿèœ'},{L:'J',en:'Jackfruit',zh:'è èèœœ'},{L:'K',en:'Kiwi',zh:'çŒ•çŒ´æ¡ƒ'},{L:'L',en:'Lemon',zh:'æŸ æª¬'},{L:'M',en:'Mango',zh:'èŠ’æœ'},{L:'N',en:'Nectarine',zh:'æ²¹æ¡ƒ'},{L:'O',en:'Orange',zh:'æ©™å­'},{L:'P',en:'Pumpkin',zh:'å—ç“œ'},{L:'Q',en:'Quince',zh:'æ¦…æ¡²'},{L:'R',en:'Raspberry',zh:'æ ‘è“'},{L:'S',en:'Strawberry',zh:'è‰è“'},{L:'T',en:'Tomato',zh:'è¥¿çº¢æŸ¿'},{L:'U',en:'Ugli Fruit',zh:'ä¸‘æ©˜'},{L:'V',en:'Vanilla',zh:'é¦™è‰'},{L:'W',en:'Watermelon',zh:'è¥¿ç“œ'},{L:'X',en:'Xigua',zh:'è¥¿ç“œ'},{L:'Y',en:'Yam',zh:'å±±è¯'},{L:'Z',en:'Zucchini',zh:'è¥¿è‘«èŠ¦'}];

        let currentMode = 'animal';
        const board = document.getElementById('game-board');

        // ... (toggleMode, speakText, shuffleArray å‡½æ•°ä¿æŒä¸å˜) ...
        function toggleMode() {
            const switchEl = document.getElementById('mode-switch');
            const body = document.body;
            const title = document.getElementById('page-title');
            if (currentMode === 'animal') {
                currentMode = 'plant';
                switchEl.classList.remove('animal-active'); switchEl.classList.add('plant-active');
                body.classList.remove('mode-animal'); body.classList.add('mode-plant');
                title.textContent = 'ğŸ æˆ‘çš„ABC';
            } else {
                currentMode = 'animal';
                switchEl.classList.remove('plant-active'); switchEl.classList.add('animal-active');
                body.classList.remove('mode-plant'); body.classList.add('mode-animal');
                title.textContent = 'ğŸ¦ æˆ‘çš„ABC';
            }
            initGame();
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US'; utterance.rate = 0.8;
                window.speechSynthesis.speak(utterance);
            }
        }
        function shuffleArray(array) {
            let arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function initGame() {
            const countInput = document.querySelector('input[name="count"]:checked');
            const totalCount = parseInt(countInput.value);
            const sourceData = currentMode === 'animal' ? animalData : plantData;
            const shuffled = shuffleArray(sourceData);
            const selected = shuffled.slice(0, totalCount);

            board.innerHTML = '';

            selected.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.style.animationDelay = `${index * 0.1}s`; 
                const imgPath = `../images/${item.L.toLowerCase()}_${currentMode}.png`;

                // --- ä¿®å¤ç‚¹ï¼šç§»é™¤äº† buttonï¼Œç›´æ¥åœ¨ card ä¸Šå“åº”ç‚¹å‡» ---
                card.innerHTML = `
                    <div class="card-img-box">
                        <img src="${imgPath}" alt="${item.en}" onerror="this.style.display='none'; this.parentNode.innerHTML='ğŸ¨'; this.parentNode.style.fontSize='4rem';">
                    </div>
                    <div class="card-text-area">
                        <div class="big-letter">${item.L}${item.L.toLowerCase()}</div>
                        <div class="word-row">
                            <span class="word">${item.en}</span>
                            <span class="zh-word">${item.zh}</span>
                            <span class="speak-icon">ğŸ”Š</span>
                        </div>
                    </div>
                `;
                
                // æ•´ä¸ªå¡ç‰‡ç‚¹å‡»äº‹ä»¶
                card.onclick = () => {
                     speakText(`${item.L}, ${item.en}`);
                     // å¡ç‰‡ç‚¹å‡»éœ‡åŠ¨
                     if (navigator.vibrate) navigator.vibrate(20);
                };

                board.appendChild(card);
            });
        }
        initGame();
    </script>
</body>
</html>
